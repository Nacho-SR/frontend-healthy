(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{560:function(t,e,r){var content=r(578);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(14).default)("a1db04c0",content,!0,{sourceMap:!1})},577:function(t,e,r){"use strict";r(560)},578:function(t,e,r){var n=r(13)((function(i){return i[1]}));n.push([t.i,".patient-img{border-radius:5px;margin:0;-o-object-fit:cover;object-fit:cover;padding:0}.pad-lateral{padding-bottom:3px;padding-top:3px}.mar-1{margin-bottom:0;margin-top:0}.w-1{max-width:18%;min-width:50px}.v-tab{border:1px solid #f46a00;border-radius:20px;transition:box-shadow .3s}.v-tab:hover{box-shadow:0 2px 4px rgba(0,0,0,.1)}.theme--light.v-tabs-items{background-color:hsla(0,0%,100%,0)}",""]),n.locals={},t.exports=n},593:function(t,e,r){"use strict";r.r(e);var n=r(539),o=r(248),c=r(10),l=r(547),d=r(552),v=r(550),m=r(351),f=r(549),_=r(541),h=r(127),x=r(587),C=r(597),y=r(596),w=r(585),D=r(25),S=(r(91),r(26),r(8),r(115),r(53),r(3),r(29),r(41),r(354),r(11),{layout:"dashboard",auth:!0,data:function(){return{showDialog:!1,tab:1,items:["Ayer","Hoy","Mañana"],cita:{pacienteId:"",doctorId:this.$store.getters.getActualUser.email,fecha:"",hora:""},patients:[],patientNames:[],citas:[],citasAyer:[],citasHoy:[],citasManana:[]}},mounted:function(){var t=this;return Object(D.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$get("/get-all-patients");case 3:r=e.sent,console.log("API Response:",r),t.patients=r.patients||[],console.log(t.patients),t.patientNames=t.patients.map((function(t){return t.nombre})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error obteniendo pacientes:",e.t0),t.patients=[];case 14:t.loadCitas();case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()},methods:{formatHour:function(t){var e=new Date(t),r=e.getHours().toString().padStart(2,"0"),n=e.getMinutes().toString().padStart(2,"0"),o=r>=12?"p.m.":"a.m.";return"".concat(r%=12,":").concat(n," ").concat(o)},loadCitas:function(){var t=this;return Object(D.a)(regeneratorRuntime.mark((function e(){var data,r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/myCitas",data={doctorId:t.cita.doctorId},e.next=5,t.$axios.post("/myCitas",data);case 5:r=e.sent,console.log("API Response:",r),t.citas=r.data.citas||[],t.citas.forEach((function(e){var r=t.patients.find((function(p){return p.id===e.pacienteId}));r&&(e.pacienteNombre=r.nombre,e.pacienteEdad=r.edad,e.pacienteSexo=r.sexo,e.pacienteTelefono=r.telefono,e.pacienteEmail=r.email,e.pacienteDireccion=r.direccion)})),n=new Date,o=new Date(n),c=new Date(n),o.setDate(n.getDate()-1),c.setDate(n.getDate()+1),t.citasAyer=t.citas.filter((function(t){return new Date(t.fecha).toDateString()===o.toDateString()})),t.citasHoy=t.citas.filter((function(t){return new Date(t.fecha).toDateString()===n.toDateString()})),t.citasManana=t.citas.filter((function(t){return new Date(t.fecha).toDateString()===c.toDateString()})),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),console.error("Error obteniendo las citas:",e.t0),t.citas=[];case 23:case"end":return e.stop()}}),e,null,[[0,19]])})))()},agendarCita:function(){var t=this,e=/^([0-9]{1,2}):([0-9]{2}) (a.m.|p.m.)$/i.exec(this.cita.hora);if(e){var r=parseInt(e[1]),n=parseInt(e[2]),o=e[3].toUpperCase(),c=new Date;c.setHours(r),c.setMinutes(n),"P.M."===o&&r<12&&(r+=12),c.setHours(r);var l=new Date(this.cita.fecha);l.setHours(l.getHours()+6),l.setHours(c.getHours()),l.setMinutes(c.getMinutes()),console.log(l);var d=l.toISOString(),data={doctorId:this.cita.doctorId,pacienteId:this.cita.pacienteId,fecha:d};console.log(data),this.$axios.post("/agendar",data).then((function(e){console.log("@@ res => ",e),"Cita agendada successfully"===e.data.message&&(t.loadCitas(),t.showDialog=!1),"Ya existe una cita programada a esa hora."===e.data.message&&alert(e.data.message)})).catch((function(t){console.log("data =>",data),console.log("@@ error => ",t)}))}else console.error("Error: Invalid time format. Please use HH:MM AM/PM.")},horasDisponibles:function(t){if(!t)return[];var e=[],r=3e6,n=new Date(t);n.setHours(n.getHours()+6);for(var time=324e5;time<504e5;time+=r){var o=new Date(time+n.getTime()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});e.push(o)}for(var c=576e5;c<72e6;c+=r){var l=new Date(c+n.getTime()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});e.push(l)}return e}}}),k=(r(577),r(31)),component=Object(k.a)(S,(function(){var t=this,e=t._self._c;return e(h.a,{staticStyle:{"margin-bottom":"20px"},attrs:{color:"transparent"}},[e(f.a,{staticClass:"ma-0 pa-0"},[e(l.a,{attrs:{cols:"10"}}),t._v(" "),e(l.a,{staticClass:"ma-0 pa-0",attrs:{cols:"2",align:"center",justify:"center"}},[e(n.a,{attrs:{rounded:"",outlined:"",color:"#82E7EA"},on:{click:function(e){t.showDialog=!0}}},[t._v("Nueva cita")])],1)],1),t._v(" "),e(f.a,[e(y.a,{attrs:{"background-color":"transparent",color:"#f46a00",rounded:"",outlined:"",height:"50px"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.items,(function(r){return e(x.a,{key:r,staticClass:"custom-tab-button ma-2",staticStyle:{"margin-top":"40px"},attrs:{"active-class":"custom-active-tab",rounded:""}},[t._v("\n        "+t._s(r)+"\n      ")])})),1),t._v(" "),e(w.a,{staticClass:"theme--light.v-tabs-items",model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(C.a,{key:0,attrs:{align:"center"}},[0===t.citasAyer.length?e("div",[t._v("No hay citas para ayer.")]):e("div",t._l(t.citasAyer,(function(n){return e(o.a,{key:n.id,staticStyle:{"max-width":"85%","margin-bottom":"35px"},attrs:{flat:"",color:"transparent",elevation:"7"}},[e(f.a,{staticStyle:{"margin-top":"15px"},attrs:{align:"center",justify:"center"}},[e(l.a,{staticClass:"w-1 pa-0"},[e(m.a,{staticClass:"patient-img",attrs:{src:r(258),rounded:""}})],1),t._v(" "),e(l.a,{staticClass:"mar-1 pa-0",attrs:{justify:"center",align:"left"}},[e(f.a,{staticClass:"mar-1",attrs:{align:"center"}},[e(c.d,{staticClass:"pad-lateral"},[t._v(t._s(n.pacienteNombre))]),t._v(" "),e(c.d,{staticClass:"pad-lateral"},[t._v("Horario: "+t._s(t.formatHour(n.fecha)))])],1),t._v(" "),e(f.a,{staticClass:"mar-1"},[e(c.d,{staticClass:"pad-lateral"},[t._v("Edad: "+t._s(n.pacienteEdad))]),t._v(" "),e(c.d,{staticClass:"pad-lateral"},[t._v("Sexo: "+t._s(n.pacienteSexo))])],1),t._v(" "),e(f.a,[e(c.c,{staticClass:"pad-lateral"},[t._v("Teléfono de contacto: "+t._s(n.pacienteTelefono))]),t._v(" "),e(c.c,{staticClass:"pad-lateral"},[t._v("Correo electrónico: "+t._s(n.pacienteEmail))]),t._v(" "),e(c.c,{staticClass:"pad-lateral"},[t._v("Dirección: "+t._s(n.pacienteDireccion))])],1)],1)],1)],1)})),1)]),t._v(" "),e(C.a,{key:1,attrs:{align:"center"}},[0===t.citasHoy.length?e("div",[t._v("No hay citas para hoy.")]):e("div",t._l(t.citasHoy,(function(n){return e(o.a,{key:n.id,staticStyle:{"max-width":"85%","margin-bottom":"35px"},attrs:{flat:"",color:"transparent",elevation:"7"}},[e(f.a,{staticStyle:{"margin-top":"15px"},attrs:{align:"center",justify:"center"}},[e(l.a,{staticClass:"w-1 pa-0"},[e(m.a,{staticClass:"patient-img",attrs:{src:r(258),rounded:""}})],1),t._v(" "),e(l.a,{staticClass:"mar-1 pa-0",attrs:{justify:"center",align:"left"}},[e(f.a,{staticClass:"mar-1",attrs:{align:"center"}},[e(c.d,{staticClass:"pad-lateral"},[t._v(t._s(n.pacienteNombre))]),t._v(" "),e(c.d,{staticClass:"pad-lateral"},[t._v("Horario: "+t._s(t.formatHour(n.fecha)))])],1),t._v(" "),e(f.a,{staticClass:"mar-1"},[e(c.d,{staticClass:"pad-lateral"},[t._v("Edad: "+t._s(n.pacienteEdad))]),t._v(" "),e(c.d,{staticClass:"pad-lateral"},[t._v("Sexo: "+t._s(n.pacienteSexo))])],1),t._v(" "),e(f.a,[e(c.c,{staticClass:"pad-lateral"},[t._v("Teléfono de contacto: "+t._s(n.pacienteTelefono))]),t._v(" "),e(c.c,{staticClass:"pad-lateral"},[t._v("Correo electrónico: "+t._s(n.pacienteEmail))]),t._v(" "),e(c.c,{staticClass:"pad-lateral"},[t._v("Dirección: "+t._s(n.pacienteDireccion))])],1)],1)],1)],1)})),1)]),t._v(" "),e(C.a,{key:2,attrs:{align:"center"}},[0===t.citasManana.length?e("div",[t._v("No hay citas para mañana.")]):e("div",t._l(t.citasManana,(function(n){return e(o.a,{key:n.id,staticStyle:{"max-width":"85%","margin-bottom":"35px"},attrs:{flat:"",color:"transparent",elevation:"7"}},[e(f.a,{staticStyle:{"margin-top":"15px"},attrs:{align:"center",justify:"center"}},[e(l.a,{staticClass:"w-1 pa-0"},[e(m.a,{staticClass:"patient-img",attrs:{src:r(258),rounded:""}})],1),t._v(" "),e(l.a,{staticClass:"mar-1 pa-0",attrs:{justify:"center",align:"left"}},[e(f.a,{staticClass:"mar-1",attrs:{align:"center"}},[e(c.d,{staticClass:"pad-lateral"},[t._v(t._s(n.pacienteNombre))]),t._v(" "),e(c.d,{staticClass:"pad-lateral"},[t._v("Horario : "+t._s(t.formatHour(n.fecha)))])],1),t._v(" "),e(f.a,{staticClass:"mar-1"},[e(c.d,{staticClass:"pad-lateral"},[t._v("Edad: "+t._s(n.pacienteEdad))]),t._v(" "),e(c.d,{staticClass:"pad-lateral"},[t._v("Sexo: "+t._s(n.pacienteSexo))])],1),t._v(" "),e(f.a,[e(c.c,{staticClass:"pad-lateral"},[t._v("Teléfono de contacto: "+t._s(n.pacienteTelefono))]),t._v(" "),e(c.c,{staticClass:"pad-lateral"},[t._v("Correo electrónico: "+t._s(n.pacienteEmail))]),t._v(" "),e(c.c,{staticClass:"pad-lateral"},[t._v("Dirección: "+t._s(n.pacienteDireccion))])],1)],1)],1)],1)})),1)])],1)],1),t._v(" "),e(v.a,{attrs:{persistent:"",width:"500",transition:"dialog-bottom-transition"},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[e(o.a,[e(c.d,[e("span",{staticClass:"text-h5"},[t._v("Agendar cita")])]),t._v(" "),e(c.c,[e(d.a,[e(f.a,[e(l.a,{attrs:{cols:"6",sm:"6",justify:"center",align:"center"}},[e(_.a,{attrs:{items:t.patientNames,label:"Paciente*",required:""},model:{value:t.cita.pacienteId,callback:function(e){t.$set(t.cita,"pacienteId",e)},expression:"cita.pacienteId"}})],1),t._v(" "),e(l.a,{attrs:{cols:"6",sm:"6",justify:"center",align:"center"}},[e("label",{attrs:{for:"fecha"}},[t._v("Fecha:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.cita.fecha,expression:"cita.fecha"}],attrs:{type:"date",required:""},domProps:{value:t.cita.fecha},on:{input:function(e){e.target.composing||t.$set(t.cita,"fecha",e.target.value)}}})])],1),t._v(" "),e(f.a,[e(l.a,{attrs:{cols:"12",sm:"12"}},[e("label",{attrs:{for:"hora"}},[t._v("Hora:")]),t._v(" "),e(_.a,{attrs:{items:t.horasDisponibles(t.cita.fecha),label:"Hora*",required:""},model:{value:t.cita.hora,callback:function(e){t.$set(t.cita,"hora",e)},expression:"cita.hora"}})],1)],1)],1)],1),t._v(" "),e(c.a,[e(l.a,{attrs:{cols:"6"}},[e(n.a,{attrs:{block:"",color:"green"},on:{click:t.agendarCita}},[e("span",{staticStyle:{"text-transform":"none",color:"white"}},[t._v("\n              Agendar\n            ")])])],1),t._v(" "),e(l.a,{attrs:{cols:"6"}},[e(n.a,{attrs:{block:"",color:"red"},on:{click:function(e){t.showDialog=!1}}},[e("span",{staticStyle:{"text-transform":"none",color:"white"}},[t._v("\n              Cancelar\n            ")])])],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);