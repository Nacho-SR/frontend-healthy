(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{557:function(r,t,e){var content=e(566);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[r.i,content,""]]),content.locals&&(r.exports=content.locals);(0,e(14).default)("70978966",content,!0,{sourceMap:!1})},565:function(r,t,e){"use strict";e(557)},566:function(r,t,e){var n=e(13)((function(i){return i[1]}));n.push([r.i,".v-row[data-v-602570d6]{margin-top:20px}",""]),n.locals={},r.exports=n},591:function(r,t,e){"use strict";e.r(t);var n=e(539),o=e(248),c=e(10),l=e(547),d=e(550),f=e(188),m=e(249),h=e(151),v=e(250),y=e(64),_=e(549),C=e(127),O=e(2);e(12),e(8),e(115),e(53),e(17),e(18),e(9),e(3),e(11);function j(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function w(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?j(Object(e),!0).forEach((function(t){Object(O.a)(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):j(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var A={layout:"dashboard",auth:!0,data:function(){return{medicinasBD:[],carrito:{},mostrarCarrito:!1,userId:this.$store.getters.getActualUser.email}},computed:{carritoArray:function(){var r=this;return Object.keys(this.carrito).map((function(t){return w(w({},r.medicinasBD.find((function(r){return r.id===t}))),{},{quantity:r.carrito[t]})}))}},mounted:function(){this.obtenerMedicinas()},methods:{obtenerMedicinas:function(){var r=this;this.$axios.get("/getAllMedicines").then((function(t){console.log("response => ",t),"success"===t.data.message&&(r.medicinasBD=t.data.medicines)})).catch((function(r){console.log("error => ",r)}))},handleQuantityUpdate:function(r){var t=r.id,e=r.quantity,n=r.descripcion,o=r.nombre;e>0?this.$set(this.carrito,t,e,n,o):this.$delete(this.carrito,t)},agregarAlCarrito:function(){console.log("Carrito agregado: ",this.carritoArray),0===this.carritoArray.length?alert("AÃºn no has seleccionado ningun producto."):alert("Productos agregados. Entra a tu carrito para confirmar la compra.")},confirmarCarrito:function(){var r=this,t=this.carritoArray.map((function(r){return{id:r.id,descripcion:r.descripcion,nombre:r.nombre,quantity:r.quantity}})),data={userId:this.userId,carrito:t};console.log(data),this.$axios.post("/comprar",data).then((function(t){r.obtenerMedicinas(),r.resetAllQuantities(),r.mostrarCarrito=!1})).catch((function(r){console.error("Error procesando la compra: ",r)}))},cancelar:function(){this.mostrarCarrito=!1},eliminarItemCarrito:function(r){this.$delete(this.carrito,r),this.$refs.medicinas.forEach((function(t){t.medicina.id===r&&t.resetQuantity()}))},resetAllQuantities:function(){this.$refs.medicinas.forEach((function(r){return r.resetQuantity()}))}}},k=(e(565),e(31)),component=Object(k.a)(A,(function(){var r=this,t=r._self._c;return t(C.a,{attrs:{color:"transparent"}},[t(_.a,{staticClass:"ma-1"},[t(l.a,{attrs:{cols:"8"}},[t("div")]),r._v(" "),t(l.a,{attrs:{cols:"4"}},[t(n.a,{attrs:{outlined:"",color:"primary"},on:{click:r.agregarAlCarrito}},[r._v("\n        Agregar al carrito\n      ")]),r._v(" "),t(n.a,{attrs:{icon:""},on:{click:function(t){r.mostrarCarrito=!r.mostrarCarrito}}},[t(f.a,[r._v("mdi-cart")])],1)],1)],1),r._v(" "),t(_.a,r._l(r.medicinasBD,(function(e){return t("MedicineCard",{key:e.id,ref:"medicinas",refInFor:!0,attrs:{medicina:e},on:{"quantity-update":r.handleQuantityUpdate}})})),1),r._v(" "),t(d.a,{attrs:{persistent:"","max-width":"600px"},model:{value:r.mostrarCarrito,callback:function(t){r.mostrarCarrito=t},expression:"mostrarCarrito"}},[t(o.a,[t(c.d,[r._v("\n        Carrito\n      ")]),r._v(" "),t(c.c,[t(m.a,r._l(r.carritoArray,(function(e){return t(h.a,{key:e.id},[t(y.a,[t(y.c,[r._v(r._s(e.nombre))]),r._v(" "),t(y.b,[r._v("Cantidad: "+r._s(e.quantity))])],1),r._v(" "),t(v.a,[t(n.a,{attrs:{icon:""},on:{click:function(t){return r.eliminarItemCarrito(e.id)}}},[t(f.a,[r._v("mdi-delete")])],1)],1)],1)})),1)],1),r._v(" "),t(c.a,[t(n.a,{attrs:{color:"primary"},on:{click:r.confirmarCarrito}},[r._v("Confirmar")]),r._v(" "),t(n.a,{attrs:{color:"red"},on:{click:r.cancelar}},[r._v("Cerrar")])],1)],1)],1)],1)}),[],!1,null,"602570d6",null);t.default=component.exports}}]);